<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Web Bluetooth</title>
</head>
<body>

	<form>
		<button>Connect</button>
	</form>

	<script>

		function isWebBLEAvailable() {
			if(!navigator.bluetooth) {
				console.log('BLE not available');
			}

			return true;
		}

		function getDeviceInfo() {

			let options = {
				acceptAllDevices: true
				// filters: [ { name : 'device name' }]
			}

			console.log('Requesting BLE device info...');
			navigator.bluetooth.requestDevice(options).then(device => {
				//console.log('Name: ' + device.name);
				alert('Name: ', + device.name)
			}).catch(error => {
				console.log('Request device error: ' + error);
			});
		}

		function requestBluetoothDevice() {
			log('Requesting bluetooth device...');

			return navigator.bluetooth.requestDevice({
				filters: [{services: [0xFFE0]}],
			}).
				then(device => {
					log('"' + device.name + '" bluetooth device selected');
					deviceCache = device;

					return deviceCache;
				});
		}


		document.querySelector('form').addEventListener('submit',
		function(event) {
			event.stopPropagation()
			event.preventDefault()

			if(isWebBLEAvailable()) {
				getDeviceInfo()
			}
		})
	</script>
</body>
</html>
