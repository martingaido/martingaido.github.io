<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Phone Sensors</title>

	<script>

		/* Screen Orientation */
		window.addEventListener('orientationchange', function(v1) {

			/* Approach: Compare height / width to determine orientation */
			var isLandscape = (window.innerHeight > window.innerWidth);

			if(isLandscape) {
				document.getElementById('screenOrientation').innerHTML = `<strong>Landscape</strong>`;
			} else {
				document.getElementById('screenOrientation').innerHTML = `<strong>Portrait</strong>`;
			}
		});


		if (typeof DeviceOrientationEvent.requestPermission === 'function') {
			DeviceOrientationEvent.requestPermission()
			.then(permissionState => {
				if (permissionState === 'granted') {
					/* Device Orientation */
					window.addEventListener('deviceorientation', function(v2) {
						document.getElementById('alpha').innerHTML   = `Alpha (α): ${v2.alpha}`;
						document.getElementById('beta').innerHTML    = `Beta (ß): ${v2.beta}`;
						document.getElementById('gamma').innerHTML   = `Gamma (Γ): ${v2.gamma}`;
						document.getElementById('debugV2').innerHTML = JSON.stringify(v2);
					});
				}
			})
			.catch(console.error);

		} else {

			// handle regular non iOS 13+ devices
			window.addEventListener('deviceorientation', function(v2) {
				document.getElementById('alpha').innerHTML   = `Alpha (α): ${v2.alpha}`;
				document.getElementById('beta').innerHTML    = `Beta (ß): ${v2.beta}`;
				document.getElementById('gamma').innerHTML   = `Gamma (Γ): ${v2.gamma}`;
				document.getElementById('debugV2').innerHTML = JSON.stringify(v2);
			});
		}


		if (typeof DeviceMotionEvent.requestPermission === 'function') {

			DeviceMotionEvent.requestPermission()
			.then(permissionState => {
				if (permissionState === 'granted') {

					/* Acceleration / Motion */
					window.addEventListener('devicemotion', function(v3) {
						document.getElementById('accel').innerHTML = `Acceleration: X: ${v3.acceleration.x}, Y: ${v3.acceleration.y}, Z: ${v3.acceleration.z}`;
						document.getElementById('rotationRate').innerHTML = `Rotation Rate: α: ${v3.rotationRate.alpha}, ß: ${v3.rotationRate.beta}, Γ: ${v3.rotationRate.gamma}`;
					});
				}
			})
			.catch(console.error);

		} else {

			// handle regular non iOS 13+ devices
			window.addEventListener('devicemotion', function(v3) {
				document.getElementById('accel').innerHTML = `Acceleration: X: ${v3.acceleration.x}, Y: ${v3.acceleration.y}, Z: ${v3.acceleration.z}`;
				document.getElementById('rotationRate').innerHTML = `Rotation Rate: α: ${v3.rotationRate.alpha}, ß: ${v3.rotationRate.beta}, Γ: ${v3.rotationRate.gamma}`;
			});
		}

	</script>

</head>
<body>

	Better to see it in a mobile device.

	<h2>Screen Orientation</h2>
	<div id="screenOrientation"></div>

	<br><br>

	<h2>Device Orientation</h2>
	<div id="alpha"></div><br>
	<div id="beta"></div><br>
	<div id="gamma"></div>

	<br><br>

	<h2>Acceleration</h2>
	<div id="accel"></div><br>
	<div id="rotationRate"></div><br><br>

</body>
</html>
